<!DOCTYPE html>
<html lang="en"><head>
        <meta charset="UTF-8">
        <title>proxyerium's blog</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/styles.css">
    </head>

    <body>
        <a href="..">back</a>
<p>æƒ³è¯•è¯•æ–°çš„ root æ–¹æ¡ˆ <em>KernelSU</em> ï¼Œä½†æˆ‘æ‰‹æœºçš„å†…æ ¸ç‰ˆæœ¬æ˜¯ 4.19ï¼Œç”¨ä¸å¾—é€šç”¨å†…æ ¸é•œåƒï¼Œéœ€è¦è‡ªè¡Œç¼–è¯‘å†…æ ¸ï¼Œå¹¸å¥½ KernelSU çš„<a href="https://kernelsu.org/zh_CN/guide/unofficially-support-devices.html">éå®˜æ–¹æ”¯æŒåˆ—è¡¨</a>ä¸­æœ‰å¤§ä½¬åœ¨ç»´æŠ¤ picasso çš„å†…æ ¸æºç ã€‚</p>
<p>æœ¬ç¯‡è®°å½•æˆ‘å€ŸåŠ© <strong>@EndCredits</strong> å¤§ä½¬ç»´æŠ¤çš„<a href="https://github.com/EndCredits/kernel_xiaomi_sm7250">kernel_xiaomi_sm7250</a>ç»™æˆ‘çš„æ‰‹æœºç¼–è¯‘å†…æ ¸ã€‚</p>
<h2>æ­å»ºç¯å¢ƒ</h2>
<p>å†™äº†ä¸ª dockerfile ç®€åŒ–ç¯å¢ƒæ­å»ºï¼Œåˆšæ¥è§¦ docker çš„æ—¶å€™ä¸çŸ¥é“ dockerfileï¼Œæ¯æ¬¡å¼€æ–°å®¹å™¨éƒ½è¦æ‰‹åŠ¨å†é…ä¸€éç¯å¢ƒï¼Œç´¯åˆ°ç™«å» ğŸ˜¢ã€‚</p>
<pre><code class="language-sh hljs language-bash">git <span class="hljs-built_in">clone</span> https://github.com/Proxyerium/picasso-build-host.git
<span class="hljs-built_in">cd</span> picasso-build-host
docker build --<span class="hljs-built_in">rm</span> -t picasso-build-host .
</code></pre>
<p>ç­‰å¾… docker é•œåƒç”Ÿæˆå®Œæ¯•ï¼Œç„¶å¾Œè¿è¡Œä¸€ä¸ªè™šæ‹Ÿæœºï¼š</p>
<pre><code class="language-sh hljs language-bash">docker run -it --name picasso picasso-build-host
</code></pre>
<h2>é›†æˆ KernelSU</h2>
<blockquote>
<p>å¦‚æœ curl è¿æ¥å¤±è´¥çš„è¯ï¼Œæ¢ä¸ª DNS è¯•è¯•</p>
</blockquote>
<p>å°† KernelSU æ·»åŠ åˆ°å†…æ ¸æºç çš„æ ¹ç›®å½•ï¼š</p>
<pre><code class="language-sh hljs language-bash">curl -LSs <span class="hljs-string">"https://raw.githubusercontent.com/tiann/KernelSU/main/kernel/setup.sh"</span> | bash -
</code></pre>
<p>defconfig ä¸­æ·»åŠ ç›¸å…³é…ç½®ï¼š</p>
<pre><code class="language-sh hljs language-bash"><span class="hljs-built_in">echo</span> -e <span class="hljs-string">"CONFIG_KPROBES=y\nCONFIG_HAVE_KPROBES=y\nCONFIG_KPROBE_EVENTS=y"</span> &gt;&gt; ./arch/arm64/configs/vendor/picasso_user_defconfig
</code></pre>
<h2>ç¼–è¯‘å†…æ ¸</h2>
<blockquote>
<p>åœ¨ç¼–è¯‘ä¹‹å‰ï¼Œå¦‚æœéœ€è¦é…ç½®ç¼–è¯‘è¿›å†…æ ¸çš„å†…å®¹ï¼š</p>
<pre><code class="language-sh hljs language-bash">make ARCH=arm64 LLVM=1 O=../out -j$(<span class="hljs-built_in">nproc</span> --all) menuconfig
</code></pre>
</blockquote>
<p>ç°åœ¨æ˜¯ç¼–è¯‘æ—¶é—´ï¼š</p>
<pre><code class="language-sh hljs language-bash"><span class="hljs-built_in">sudo</span> ./build.sh all
</code></pre>
<p>ç­‰å¾…ç¼–è¯‘ç»“æŸï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ‰“åŒ…å¥½æ‰€æœ‰ä¸œè¥¿ï¼Œæ‰¾åˆ° <code>Target File</code> æŒ‡ç¤ºçš„æ–‡ä»¶ï¼Œä¼ åˆ°å®¿ä¸»æœºï¼ŒæŠŠè¯¥æ–‡ä»¶åˆ·è¿›æ‰‹æœºå°±å¾—äº†ï¼š</p>
<pre><code class="language-sh hljs language-bash">docker <span class="hljs-built_in">cp</span> picasso:/build-host/out/AnyKernel3-picasso/xxxxx.zip .
</code></pre>
<blockquote>
<img src="kernelsu.webp" style="width: 50%; height: auto;">
æˆåŠŸï¼ŒKernelSUå·¥ä½œä¸­ğŸ˜‹
</blockquote>
<h2>å‚è€ƒèµ„æ–™</h2>
<p><a href="https://kernelsu.org/zh_CN/guide/how-to-integrate-for-non-gki.html">å¦‚ä½•ä¸ºé GKI å†…æ ¸é›†æˆ KernelSU</a></p>
<p><a href="https://blog.crepuscular-aosp.icu/blogs/linux/build-kernel.html">Build a Kernel for Redmi K30 5G by your self.</a></p>


    


</body></html>